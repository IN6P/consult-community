{% extends "base.html" %}

{% block content %}
<script>
    window.addEventListener('DOMContentLoaded', checkAuthorizedAccessAndRedirect)
</script>
<h1 class="title has-text-black">고민 작성</h1>
<form id="postForm" method="post">
    <div class="field">
        <label class="label has-text-black">제목</label>
        <div class="control">
            <input class="input" type="text" name="title" placeholder="고민의 제목을 입력하세요" required>
        </div>
    </div>
    <div class="field">
        <div class="control">
            <label class="radio">
                <input type="radio" name="revealed" value="false" checked="checked" />
                익명
            </label>
            <label class="radio">
                <input type="radio" name="revealed" value="true" />
                실명
            </label>
        </div>
    </div>
    <div class="field">
        <label class="label has-text-black">내용</label>
        <div class="control">
            <textarea class="textarea" name="content" placeholder="고민의 내용을 입력하세요" required></textarea>
        </div>
    </div>
    <div class="field is-grouped">
        <div class="control">
            <button type="submit" class="button is-pri">게시하기</button>
        </div>
    </div>
    <input type="hidden" id="token" name="token" value="" />
</form>
<script src="https://cdn.jsdelivr.net/npm/jwt-decode@3.1.2/build/jwt-decode.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {

        const token = sessionStorage.getItem('access_token');
        document.getElementById('token').value = token;
    })
</script>

{% endblock %}